{{ define "updatePassword" }}
{{ template "template_start" . }}

<div class="row d-flex justify-content-center mt-5">
    <div class="col-8">
        <h2>–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</h2>

        <form id="updatePasswordForm" action="/judges/{{ .judge.ID }}/profile/updatePassword" method="post">
            <div class="form-group">
                <label for="inputPassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                <div class="input-group">
                    <input type="password" class="form-control" id="inputPassword" name="password" required>
                    <div class="input-group-append">
                        <button type="button" class="btn btn-outline-secondary" id="toggleNewPassword">üëÅÔ∏è</button>
                    </div>
                </div>
                <small id="passwordHelp" class="form-text text-muted">
                    –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 8 —Å–∏–º–≤–æ–ª–æ–≤, –≤–∫–ª—é—á–∞—è –∫–∞–∫ –±—É–∫–≤—ã, —Ç–∞–∫ –∏ —Ü–∏—Ñ—Ä—ã.
                </small>
                <ul id="passwordRequirements" class="list-unstyled mt-2">
                    <li id="lengthRequirement" class="text-danger">‚Ä¢ –î–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è –Ω–µ –º–µ–Ω–µ–µ 8 —Å–∏–º–≤–æ–ª–æ–≤</li>
                    <li id="letterRequirement" class="text-danger">‚Ä¢ –°–æ–¥–µ—Ä–∂–∏—Ç –±—É–∫–≤—ã</li>
                    <li id="numberRequirement" class="text-danger">‚Ä¢ –°–æ–¥–µ—Ä–∂–∏—Ç —Ü–∏—Ñ—Ä—ã</li>
                </ul>
            </div>
            <div class="form-group">
                <label for="confirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è</label>
                <div class="input-group">
                    <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required>
                    <div class="input-group-append">
                        <button type="button" class="btn btn-outline-secondary" id="toggleConfirmPassword">
                            <i class="bi bi-eye" id="confirmPasswordIcon"></i>
                        </button>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-primary">–û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.querySelector('form');
        form.addEventListener('submit', function (event) {
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (newPassword !== confirmPassword) {
                alert('–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç.');
                event.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã
            }
        });
    });

    document.addEventListener('DOMContentLoaded', function () {
        const newPasswordInput = document.getElementById('newPassword');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const currentPasswordInput = document.getElementById('currentPassword');

    function togglePasswordVisibility(inputId, buttonId) {
        const input = document.getElementById(inputId);
        const button = document.getElementById(buttonId);

        button.addEventListener('click', function () {
            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'üôà'; // Change icon to indicate hiding
            } else {
                input.type = 'password';
                button.textContent = 'üëÅÔ∏è'; // Change icon to indicate showing
            }
        });
    }

    // Initialize toggle functionality
    togglePasswordVisibility('newPassword', 'toggleNewPassword');
    togglePasswordVisibility('confirmPassword', 'toggleConfirmPassword');
    togglePasswordVisibility('currentPassword', 'toggleCurrentPassword');
    });
</script>

{{ template "template_end" . }}
{{ end }}
